\section{Data and Methods}\label{sec:data}

We follow the popular statistical convention of experimental designers to 
refer to the service upgrade as \factor{}, the group of users without the 
upgrade as \control{} and the upgraded users as \treatment{} 
\cite{stats-design}. Our dataset consists of network usage byte counters 
reported by Comcast residential broadband gateways every 15 minutes from October 
1, 2014 to December 29, 2014. There are two sets of broadband service tiers that 
were used to collect this data: \control{} set, consisting of 
18,322 households with a 105 Mbps access link, and the 
\treatment{} set, consisting of 2,200 households that were 
paying for a 105 Mbps access link, yet were receiving 250 Mbps instead. 
Subscribers in the \treatment{} set were selected randomly and were not told 
that their access bandwidth has been increased.


\paragraph{Data Description: }Each dataset contains the following relevant 
fields: Device ID, sample period time, service class, service direction, 
anonymized IP address, and the bytes transferred in the 15 minute sample slot, 
as described in table~\ref{tab:field-description}.

\begin{table}[t]
\small
\begin{tabular}{ l l }
\hline
\textbf{Field}         & \textbf{Description}				\\\hline
Device\_number         & Arbitrarily assigned household identifier	\\
end\_time              & 15 minute sample period end time		\\
cmts\_inet             & Anonymous IP identifier			\\
service\_direction     & \{downstream, upstream\}                 	\\
octets\_passed         & Byte count in 15 minutes sample period		\\\hline
\end{tabular}
\caption{Field descriptions for Comcast's \control{} and \treatment{} datasets}
\label{tab:field-description}
\end{table}


\paragraph{Data Sanitization: }Our initial analysis of the data from more than 
22,000 households showed that not all gateways were reporting their traffic
counters every 15 minutes over the three month period. 32\% of the \treatment{}
set, and 72\% of the \control{} set gateway devices were responsive for less than 80\% of the
time. For the analysis in \autoref{sec:analysis}, we present our
results based on the accepted group of subscribers, that contributed to
the dataset more that 80\% during their lifetime.


\begin{figure*}[t]
\centering
\includegraphics[width=\linewidth]{figures/traffic_demand_Oct.pdf}
  \caption{Traffic demand for an average subscriber in the \control{} and 
\treatment{} groups for two weeks in October\label{fig:traffic-load}}
\end{figure*}

\begin{table*}[t]
\begin{tabular}{| ccc|cccc|c |}
\hline
\multicolumn{3}{| c |}{} & \multicolumn{4}{c |}{Hourly traffic per 1000 subscribers} & \multicolumn{1}{c |}{per subscriber}\\ 
Dataset   & Direction & Subscribers & Total GBytes & 95\% Traffic & \textbf{PT 
Traffic} & \textbf{Non-PT Traffic} & Daily Demand \\ \hline
control   & downstream      & 4845         & \num{2.67e+5}               
   & 234.5  & \textbf{205.1}  & \textbf{108.5}       & 2.97   \\
treatment & downstream      & 1519         & \num{2.95e+5}  
& 244.42  & \textbf{209.5}  & \textbf{122.3}   & 3.30  \\\specialrule{0.005em}{0em}{0em} 
control   & upstream        & 4845        & \num{2.98e+4}  
& 21.39  & \textbf{18.942}  & \textbf{12.80}  & 0.33 \\
treatment & upstream        & 1519        & \num{4.27e+4} 
& 31.48   & \textbf{22.81}   & \textbf{19.02} & 0.48 \\\hline                                
\end{tabular}
\caption{Overview of the \control{} and \treatment{} datasets. The 95 
percentile traffic is the peak of total demand. PT traffic is the average 
traffic demand during prime-time hours. Non-PT traffic is calculated 
during non-prime-time. The daily demand is the average traffic demand per 
subscriber over a single day. All values are in Giga Bytes (GB).\label{tab:data-stats}}
\end{table*}


\paragraph{Data Characterization: }Our sanitized dataset consisted of 4,845 
subscribers in the \control{} group and 1,519 subscribers in the \treatment{}. 

Figure \ref{fig:traffic-load} shows that the traffic demand per subscriber during
a 15-minute measurement period for both groups was similar, and had the
expected diurnal usage pattern that peaks in the evening hours.
The Service Level Agreement for subscribers with Comcast was 105 Mbps
and the average subscribers does not fill the link consistently
for 15 minutes to utilize the full capacity.

Table \ref{tab:data-stats} compares the total demand for subscribers
in the \control{} and \treatment{} groups, scaled to a thousand subscribers.
The downlink 95 percentile utilization, calculated as the ratio of the 95th 
percentile of the hourly traffic demand to the service capacity, is 234.5 GB 
over the \control{} group, and 244.42 GB for the treatment group.

Table \ref{tab:data-stats} also shows that an average subscriber of the \control{}
group would download 2.97 GB in a day, and 3.30 GB if they belonged to the \treatment{}
group. As for the uplink, an average subscriber would transfer 0.33 GB in a day in the
\control{} group, and 0.48 GB in a day in the \treatment{} group.

\paragraph{Methods: } Controlled experiments are difficult to do on the Internet scale. In
our work, we had access to a dataset collected through a randomized control 
experiment on the scale of a large urban city. This enables us to study the effect of 
just one factor, \emph{the service plan upgrade}, while other
factors, such as price, performance, or regional differences between users, are
controlled. We believe the affects observed on this dataset will also
be observed in others collected from urban cities and high tiers.

By examining a single ISP's high capacity tier with an unannounced upgrade,
our dataset mitigates several biases that previous studies may have 
suffered. Studying the behavior of users who opt for buying a higher service plan
(unsatisfied subscribers) will naturally show an increase in demand on
upgrading service. Similarly users who have been offered a free upgrade in service
may unknowingly change their behavior to utilize the upgraded capacity
(cognitive bias). Studying datasets with these biases are prone 
to showing a positive high correlation between demand and capacity. 